<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
    </h:head>
    <body>
        <ui:composition template="./templates/masterTemplate.xhtml">

            <ui:define name="top">
                <ui:include src="./templates/commonMenu.xhtml "/>
            </ui:define>

            <ui:define name="content">
                <h2>Prohledávání</h2>
                
                <h:form>
	                <c:if test="#{indexSearch eq null or indexSearch.root eq null}">
	                	<!-- No display selection -->
	                		<h:commandLink value="Zobrazit katedry"
									action="#{index.showAllDepartments()}" /><br/>
							<h:commandLink value="Zobrazit předměty"
									action="#{index.showAllCourses()}" /><br/>
							<h:commandLink value="Zobrazit učitelé"
									action="#{index.showAllTeachers()}" /><br/>
	                </c:if>
	                
	                <c:if test="#{indexSearch != null and indexSearch.root != null}">
	                	<!-- Display selection -->
	                	
	                	<!-- Header -->
	                	<c:if test="#{indexSearch.root eq 'ROOT_DEPT'}">
	                		<h:commandLink value="Zobrazit katedry"
									action="#{index.showAllDepartments()}" /> 
	                	</c:if>
	                	
	                	<c:if test="#{indexSearch.root eq 'ROOT_TEACHERS'}">
	                		<h:commandLink value="Zobrazit předměty"
									action="#{index.showAllCourses()}" />
	                	</c:if>
	                	
	                	<c:if test="#{indexSearch.root eq 'ROOT_COURSES'}">
	                		<h:commandLink value="Zobrazit učitelé"
									action="#{index.showAllTeachers()}" />
	                	</c:if>
	                	
	                	<c:forEach var="e" items="#{indexSearch.currentSearchStack}">
	                		<h:commandLink value="#{r.displayShort()}"
									action="#{index.select(e)}" />
	                	</c:forEach>
	                	
	                	<br />
	                	
	                	<c:if test="#{indexSearch.currentSearchStack.size() eq 0}">
	                		<!-- Display all -->
	                		<c:if test="#{indexSearch.root eq 'ROOT_DEPT'}">
	                			<c:forEach var="d" items="#{index.allDepartments}">
	                				<div class="box">
	                					<span style="color:green"><h:commandLink value="#{d.displayShort()}"
											action="#{index.select(d)}" /> #{d.name}</span><br />
										#{d.description}
	                				</div>
			                	</c:forEach>
		                	</c:if>
		                	
		                	<c:if test="#{indexSearch.root eq 'ROOT_TEACHERS'}">
		                		
		                	</c:if>
		                	
		                	<c:if test="#{indexSearch.root eq 'ROOT_COURSES'}">
		                		
		                	</c:if>
	                	</c:if>
	                	
	                	<c:if test="#{indexSearch.currentSearchStack.size() > 0}">
	                		<!-- display top element -->
	                	</c:if>
	                	
	                </c:if>
	        	</h:form>
            </ui:define>

        </ui:composition>
    </body>
</html>
